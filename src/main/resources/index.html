<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Beer library</title>
    <style>
        h3 {
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }

        .beers {
            display: flex;
            background: #f4f4f4;
            padding: 10px;
            margin-bottom: 10px;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }

        .beers ul {
            list-style: none;
        }
    </style>
</head>

<body>
    <button id="button">Load beers</button>
    <br></br>
    <button id="button2">Add beer</button>
    <br></br>
    <h3>Beers</h3>
    <div id="beers"></div>

    <script>
        document.getElementById('button').addEventListener('click', loadBeers);
        document.getElementById('button2').addEventListener('click', saveBeer);

        function loadBeers() {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'http://localhost:8080/beers', true);
            xhr.onload = function () {
                if (this.status == 200) {
                    var beers = JSON.parse(this.responseText);

                    var output = '';
                    for (var i in beers) {
                        output +=
                            '<div class="beers">' +
                            '<ul>' +

                            '<li>' + beers[i].brand + '</li>' +
                            '<li>Description: ' + beers[i].description + '</li>' +
                            '<li>Rating: ' + beers[i].rating + '</li>' +
                            '</ul>' +
                            '</div>';
                    }
                    document.getElementById('beers').innerHTML = output;
                }
            }
            xhr.send();
        }

        function saveBeer() {
            var xhr2 = new XMLHttpRequest;
        
            xhr2.open("POST", "http://localhost:8080/beers", true);
            xhr2.setRequestHeader("Content-type", "application/json");

            xhr2.onreadystatechange = function () { // Call a function when the state changes.
                if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
                    // Request finished. Do processing here.
                }
            }

            xhr2.send("brand=corona&description=test&rating=3");


        }

    </script>
</body>

</html>